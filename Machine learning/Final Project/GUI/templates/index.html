<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake News Detector | Pro AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="glass-container">
        <header>
            <h1>Fake News <span>Guard</span></h1>
            <p>Advanced Naive Bayes Analysis (No-Sklearn Implementation)</p>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab-btn active" onclick="switchTab('single')">Single Analysis</button>
            <button class="tab-btn" onclick="switchTab('batch')">Batch Process</button>
            <button class="tab-btn" onclick="switchTab('training')">Model Training</button>
        </nav>

        <main>
            <!-- [Tab 1] Single Prediction -->
            <section id="single-section" class="tab-content active">
                <div class="input-card">
                    <div class="form-group">
                        <label for="title">Article Title</label>
                        <input type="text" id="title" placeholder="Enter headline here...">
                    </div>
                    <div class="form-group">
                        <label for="text">Article Content</label>
                        <textarea id="text" rows="6" placeholder="Paste article text here..."></textarea>
                    </div>

                    <!-- Advanced Configuration -->
                    <div class="advanced-config">
                        <h3><span class="icon">‚öôÔ∏è</span> Settings</h3>
                        <div class="config-grid">
                            <div class="config-item">
                                <label>Algorithm</label>
                                <select id="algorithm">
                                    <option value="best_naive_bayes">Auto (Best NB)</option>
                                    <option value="bnb">Bernoulli NB</option>
                                    <option value="mnb">Multinomial NB</option>
                                    <option value="cnb">Complement NB</option>
                                    <option value="logistic_regression">Logistic Regression (Soon)</option>
                                    <option value="svm">SVM (Soon)</option>
                                    <option value="xgboost">XGBoost (Soon)</option>
                                </select>
                            </div>
                            <div class="config-item">
                                <label>Alpha (Smoothing): <span id="alpha-val">0.01</span></label>
                                <input type="range" id="alpha" min="0" max="5" step="0.01" value="0.01"
                                    oninput="document.getElementById('alpha-val').textContent=this.value">
                            </div>
                            <div class="config-item checkbox-group">
                                <label><input type="checkbox" id="fit_prior" checked> Fit Prior</label>
                                <label id="norm-container" style="display:none;"><input type="checkbox" id="norm"> Norm
                                    (CNB)</label>
                            </div>
                            <div class="config-item" id="binarize-container" style="display:none;">
                                <label>Binarize Threshold</label>
                                <input type="number" id="binarize" step="0.1" value="0.0">
                            </div>
                        </div>
                    </div>

                    <button id="analyze-btn" class="primary-btn">Analyze Credibility</button>
                </div>

                <div id="result-container" class="result-card hidden">
                    <div class="result-header">
                        <div id="result-badge" class="badge">FAKE</div>
                        <div class="confidence-wrap">
                            <span>Confidence</span>
                            <div class="progress-bar">
                                <div id="confidence-fill" class="fill"></div>
                            </div>
                            <span id="confidence-text">98%</span>
                        </div>
                    </div>
                    <div class="explainability">
                        <h4>Key Indicators</h4>
                        <div id="top-words" class="word-cloud">
                            <!-- Chips added by JS -->
                        </div>
                        <p class="model-info">Computed using <span id="algo-name-display">-</span></p>
                    </div>
                </div>
            </section>

            <!-- [Tab 2] Batch Processing -->
            <section id="batch-section" class="tab-content">
                <div class="input-card pb-focus">
                    <h3>Batch CSV Analysis</h3>
                    <p>Upload a CSV file containing <code>title</code> and <code>text</code> columns.</p>
                    <div class="file-upload">
                        <input type="file" id="batch-file" accept=".csv">
                        <button id="batch-btn" class="primary-btn">Process Dataset</button>
                    </div>
                    <div id="batch-status" class="status-msg"></div>

                    <!-- Batch Analytics Summary -->
                    <div id="batch-analytics" class="batch-analytics hidden">
                        <h4>Dataset Distribution</h4>
                        <div class="stats-row">
                            <div class="stat-card">
                                <span class="stat-label">Real News</span>
                                <span id="batch-real-perc" class="stat-value">0%</span>
                                <div class="mini-bar">
                                    <div id="batch-real-fill" class="fill real"></div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Fake News</span>
                                <span id="batch-fake-perc" class="stat-value">0%</span>
                                <div class="mini-bar">
                                    <div id="batch-fake-fill" class="fill fake"></div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Total Processed</span>
                                <span id="batch-total-count" class="stat-value">0</span>
                            </div>
                        </div>
                    </div>

                    <div id="batch-results" class="batch-results-list">
                        <!-- CSV Preview -->
                    </div>
                </div>
            </section>

            <!-- [Tab 3] Model Training -->
            <section id="training-section" class="tab-content">
                <div class="input-card">
                    <h3>Automated Training API</h3>
                    <p>Trigger a full hyperparameter search across all 3 variants from scratch.</p>

                    <!-- Dynamic Training Configuration -->
                    <div class="training-config">
                        <h4><span class="icon">üõ†Ô∏è</span> Advanced Hyperparameter Search</h4>
                        <div class="grid-inputs">
                            <div class="grid-item">
                                <label>Multinomial NB Alphas</label>
                                <div class="tag-input-container" id="mnb_alphas">
                                    <div class="tags"></div>
                                    <input type="text" placeholder="Add alpha (e.g. 0.1) and hit Enter">
                                </div>
                            </div>
                            <div class="grid-item">
                                <label>Complement NB Alphas</label>
                                <div class="tag-input-container" id="cnb_alphas">
                                    <div class="tags"></div>
                                    <input type="text" placeholder="Add alpha and hit Enter">
                                </div>
                            </div>
                            <div class="grid-item">
                                <label>Bernoulli NB Alphas</label>
                                <div class="tag-input-container" id="bnb_alphas">
                                    <div class="tags"></div>
                                    <input type="text" placeholder="Add alpha and hit Enter">
                                </div>
                            </div>
                        </div>
                    </div>

                    <button id="train-trigger-btn" class="primary-btn">Run Training Pipeline</button>
                    <div class="console-box" id="train-console">
                        <p>> System ready.</p>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2026 Fake News Guard Lab</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>